{"version":3,"sources":["utils.js","boc.js","App.js","index.js"],"names":["parseQuery","queryString","query","pairs","substr","split","i","length","pair","decodeURIComponent","base64ToArrayBuffer","base64","binary_string","atob","len","bytes","Uint8Array","charCodeAt","buffer","readExternalMessageD","slice","skip","ihr_disabled","readUint","toNumber","bounceFlag","bouncedFlag","wc","hash","toArrayLike","Buffer","targetWallet","Address","readInternalMessageD","ihrDisabled","destination","readAddress","toFriendly","amount","readCoins","tonweb","TonWeb","Cell","require","qr_image","QrReader","props","onScanSuccess","decodedText","decodedResult","console","log","onDone","useEffect","Html5QrcodeScanner","fps","qrbox","render","className","src","id","BocInfo","boc","onClear","onDeploy","wallet","externalIHRdisabled","externalBounceFlag","externalBouncedFlag","internalIHRdisabled","internalBounceFlag","internalBouncedFlag","refLen","onClick","App","initialBoc","flags","bocData","useState","setBoc","file","useRef","deploying","setDeploying","readingQR","setReadingQrMode","params","window","location","search","loadBoc","e","a","stopPropagation","sendBoc","setTimeout","onFileChange","useCallback","event","fr","FileReader","onload","target","result","readAsArrayBuffer","current","files","myCell","fromBoc","ab","byteLength","view","array_buffer_to_buffer","bocU8","beginParse","externalMsg","inMsgCell","readRef","inMsg","BigNumber","toString","div","toFixed","bits","useDropzone","onDrop","getRootProps","isDragActive","ref","type","onChange","htmlFor","klass","deployDoneMessage","qrReader","data","dropArea","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.0527b282.chunk.js","sourcesContent":["\nexport function parseQuery(queryString) {\n    var query = {};\n    var pairs = (queryString[0] === '?' ? queryString.substr(1) : queryString).split('&');\n    for (var i = 0; i < pairs.length; i++) {\n        var pair = pairs[i].split('=');\n        query[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1] || '');\n    }\n    return query;\n}\n\n\nexport function base64ToArrayBuffer(base64) {\n    var binary_string = atob(base64);\n    var len = binary_string.length;\n    var bytes = new Uint8Array(len);\n    for (var i = 0; i < len; i++) {\n        bytes[i] = binary_string.charCodeAt(i);\n    }\n    return bytes.buffer;\n}","import { Address, Cell } from 'ton';\n\nexport function readExternalMessage(cell) {\n    \n}\n\n\nexport function readExternalMessageD(slice) {\n    slice.skip(1); //tag\n    const ihr_disabled = slice.readUint(1).toNumber();\n    const bounceFlag = slice.readUint(1).toNumber();\n    const bouncedFlag = slice.readUint(1).toNumber();\n    slice.skip(3); //anycast address\n\n\n    // const any =  slice.readUint(2);\n    const wc =  slice.readUint(8);\n    const addr =  slice.readUint(256);\n    \n    let hash = addr.toArrayLike(Buffer, 'be', 32);\n    let targetWallet = new Address(wc.toNumber(), hash);\n    return {\n        ihr_disabled,\n        bounceFlag,\n        bouncedFlag,\n        targetWallet\n    }\n}\n\n\nexport function readInternalMessageD(slice) {\n    \n    const ihrDisabled = slice.readUint(1).toNumber();\n    const bounceFlag = slice.readUint(1).toNumber();\n    const bouncedFlag = slice.readUint(1).toNumber();\n    slice.skip(3); //anycast address\n    const destination = slice.readAddress().toFriendly();  // destnation address\n    const amount = slice.readCoins();   // amount\n    return {\n        ihrDisabled,\n        bounceFlag,\n        bouncedFlag,\n        destination,\n        amount\n    }\n}\n\n//tonwhales \nexport function readInternalMessage(slice) {\n    \n    slice.skip(1);\n    const ihrDisabled = slice.readUint();\n    const bounce = slice.readUint();\n    const bounced = slice.readUint();\n    const from = slice.readAddress();\n    const to = slice.readAddress();\n    const value = slice.writeCoins();\n    slice.skip(1);\n    const ihrFees = slice.writeCoins();\n    const fwdFees = slice.writeCoins();\n    \n    return {\n        ihrDisabled,\n        bounce,\n        bounced,\n        from,\n        to,\n        value,\n        \n    }\n}\n","import { useCallback, useRef, useState, useEffect } from 'react';\nimport { useDropzone } from \"react-dropzone\";\nimport BigNumber from \"bignumber.js\";\nimport './App.css';\nimport { Address } from 'ton';\nimport { parseQuery, base64ToArrayBuffer } from './utils'\nimport  { Html5QrcodeScanner } from 'html5-qrcode'\nimport TonWeb from \"tonweb\";\nimport {readInternalMessage, readExternalMessageD, readInternalMessageD} from \"./boc\";\n\nconst tonweb = new TonWeb();\nconst Cell = require(\"ton\").Cell;\nconst qr_image = 'data:image/png;base64,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';\n\nfunction array_buffer_to_buffer(ab) {\n    const buffer = new Buffer(ab.byteLength);\n    const view = new Uint8Array(ab);\n    for (let i = 0; i < buffer.length; ++i) {\n        buffer[i] = view[i];\n    }\n    return buffer;\n}\n\nfunction App() {\n    const initialBoc = {\n        destination: 'x',\n        wallet: '',\n        amount: -1,\n        flags:'0x',\n        refLen: -1,\n        bocData: null\n    };\n\n    /** State */\n    const [boc, setBoc] = useState(initialBoc);\n    const file = useRef(null);\n    const [deploying, setDeploying] = useState(0);\n    const [readingQR, setReadingQrMode] = useState(0);\n    useEffect( ()=> {\n        let params = parseQuery(window.location.search);\n        if(params.boc) {\n            let u8Arr = base64ToArrayBuffer(params.boc);\n            loadBoc(u8Arr);\n        }\n    }, []);\n\n    var onDeploy = async (e) => {\n        e.stopPropagation();  \n        setDeploying(1);\n        await tonweb.sendBoc(boc.bocData);\n        \n        setTimeout( ()=> { setDeploying(2)}, 200);\n        setTimeout( ()=> { setDeploying(0)}, 5000);\n    }\n\n    \n\n    const onFileChange = useCallback((event) => {\n                let fr = new FileReader();\n                fr.onload = async function (e) {\n                    console.log(e.target.result);\n                    loadBoc(e.target.result);\n                }\n            fr.readAsArrayBuffer(file.current.files[0]);\n    }, []);\n\n    function loadBoc(file) {\n        const myCell = Cell.fromBoc(array_buffer_to_buffer(file));\n        const bocU8 = new Uint8Array(file);\n        const slice = myCell[0].beginParse();\n        \n        let externalMsg = readExternalMessageD(slice)\n        \n        const inMsgCell = slice.readRef();\n        let inMsg = { amount: new BigNumber(0), ihrDisabled: '', bounceFlag :'', bouncedFlag: '', destination: '-'};\n        try {\n            inMsg = readInternalMessageD(inMsgCell);\n        } catch(e) {}\n\n        setBoc({\n            wallet: externalMsg.targetWallet.toFriendly(),\n            destination: inMsg.destination,\n            amount: new BigNumber(inMsg.amount.toString(10)).div(1e9).toFixed(2),\n            'externalIHRdisabled': externalMsg.ihr_disabled,\n            'externalBounceFlag': externalMsg.bounceFlag,\n            'externalBouncedFlag': externalMsg.bouncedFlag,\n            'internalIHRdisabled': inMsg.ihrDisabled,\n            'internalBounceFlag': inMsg.bounceFlag,\n            'internalBouncedFlag': inMsg.bouncedFlag,\n            'refLen': inMsgCell.bits.length,\n            bocData: bocU8\n        });\n\n    }\n\n    function onDrop(files) {\n        let fr = new FileReader();\n        fr.onload = async function (e) {\n            loadBoc(e.target.result);\n        }\n        fr.readAsArrayBuffer(files[0]);\n    }\n\n    const { getRootProps, isDragActive } = useDropzone({onDrop});\n      const bocData = boc.wallet ?  BocInfo(boc, ()=> { setBoc(initialBoc); }, onDeploy) : \n        (<div>\n            <div className='btn qr-btn' onClick={(e)=> { setReadingQrMode(true); e.stopPropagation();  }}>\n                 <img className='btn-2 qr-logo qr-logo-btn' src={qr_image}></img>Scan QR Code\n            </div>\n            <span className=''> </span> \n            <input id=\"file-upload\" ref={file} type=\"file\" className='file' onChange={onFileChange}></input>    \n            <label htmlFor=\"file-upload\" className=\"btn btn-2\">\n                Upload Boc File\n            </label>\n        </div>);    \n//  \n    let klass = deploying == 1 ? 'busy' : '';\n    let deployDoneMessage = null;\n    if(deploying == 2) {\n        deployDoneMessage = <div className='deploy-message'>Boc Deployment Completed</div>\n    }\n\n    let qrReader = null;\n    if(readingQR) {\n        qrReader = (<QrReader onDone={onQrRead} />)\n     //   dropArea = null;\n    } else {\n        qrReader = null;\n    }\n\n    function onQrRead(data) {\n        setReadingQrMode(false);\n        let u8Arr = base64ToArrayBuffer(data);\n        loadBoc(u8Arr);\n    }   \n\n    const dropArea = readingQR || boc.bocData ? null : (<div className='drop-zone' {...getRootProps()}></div>)\n\n    return (<div className=\"App\">\n            <div className=\"app-main\"  >\n             <h1>Boc Parser</h1> \n             <div className='img'></div>\n                <div className={klass}>\n                    {dropArea}\n                    {qrReader}\n                    {bocData}\n                    {deployDoneMessage}\n                </div>\n            </div>\n        </div>);\n}\n\nconst QrReader = ( props ) => {\n    function onScanSuccess(decodedText, decodedResult) {\n        console.log('onScanSuccess',decodedText)\n        props.onDone(decodedText)\n    }\n\n    useEffect(() => {\n        var html5QrcodeScanner = new Html5QrcodeScanner(\"qr-reader\", { fps: 10, qrbox: 250 });\n        html5QrcodeScanner.render(onScanSuccess);\n          \n      }, []);\n        \n    return (\n        <div>\n            <h3><img className='qr-logo' src={qr_image}></img>Scan QR Code</h3>\n            <div id=\"qr-reader\" ></div>\n            <div className='qrReader'></div>\n        </div>)\n            \n}\n\nconst BocInfo = ( boc, onClear, onDeploy ) => {\n    \n    return (\n        <div>  \n        <div><div className='title'>Source Wallet: </div>\n        <div className='addr'>{boc.wallet}</div>\n        </div>\n        <div><div className='title'>Destination Address: </div>\n        <div className='addr'>{boc.destination}</div>\n        </div>\n        <div><div className='title'>Transfer Amount: </div>\n        <div className='addr'>{boc.amount} TON 💎</div>\n        </div>\n        <div><div className='title'>External Flags: </div>\n        <div className='addr'>IHR-Disabled {boc.externalIHRdisabled}</div>\n        <div className='addr'>Bounce {boc.externalBounceFlag}</div>\n        <div className='addr'>Bounced {boc.externalBouncedFlag}</div>\n        </div>\n        <div><div className='title'>Internal Flags: </div>\n        <div className='addr'>IHR-Disabled {boc.internalIHRdisabled}</div>\n        <div className='addr'>Bounce {boc.internalBounceFlag}</div>\n        <div className='addr'>Bounced {boc.internalBouncedFlag}</div>\n        </div>\n        <div><div className='title'>Reference bit Length: </div>\n        <div className='addr'>{boc.refLen}</div>\n        </div>\n        <br/>\n        <div className='btn btn-cancel' onClick={onClear}>Clear</div>\n        <div className='btn btn-deploy' onClick={onDeploy}>Send Boc to Mainnet</div>\n    </div>\n    )\n  };\n\nexport default App;\n","// import 'react-app-polyfill/stable';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n    <App/>,\n    document.getElementById('root')\n);\n"],"sourceRoot":""}